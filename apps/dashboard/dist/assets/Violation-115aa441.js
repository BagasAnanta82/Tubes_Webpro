import{d as I,h as O,r as u,i as H,o as J,j as Q,a as p,b as c,c as v,e as l,f as o,k as i,l as y,t as x,n as k,m as _}from"./index-b19e5614.js";import{V as W}from"./ViolationService-95b89a61.js";const X={class:"grid"},Z={class:"col-12"},ee={class:"card"},ae={class:"my-2"},le={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},te=l("h5",{class:"m-0"},"Pelanggaran SMAN 24",-1),oe={class:"block mt-2 md:mt-0 p-input-icon-left"},se=l("i",{class:"pi pi-search"},null,-1),ie=l("span",{class:"p-column-title"},"Name",-1),ne=l("span",{class:"p-column-title"},"Code",-1),de=l("span",{class:"p-column-title"},"Nilai",-1),ue=l("span",{class:"p-column-title"},"status",-1),re={class:"field"},ce=l("label",{for:"name"},"Nama Pelanggaran",-1),ve={key:0,class:"p-invalid"},me={class:"field"},pe=l("label",{for:"name"},"kode Pelanggaran",-1),_e={key:0,class:"p-invalid"},fe={class:"field"},ge=l("label",{for:"name"},"Nilai Pelanggaran",-1),he={key:0,class:"p-invalid"},be={class:"field"},ye=l("label",{class:"mb-3"},"Status Pelanggaran",-1),ke={class:"formgrid grid"},Ve={class:"field-radiobutton col-6"},Pe=l("label",{for:"category1"},"Aktif",-1),we={class:"field-radiobutton col-6"},Ce=l("label",{for:"category2"},"Tidak Aktif",-1),xe={class:"field"},Ne=l("label",{for:"name"},"Nama Pelanggaran",-1),Se={key:0,class:"p-invalid"},Me={class:"field"},De=l("label",{for:"name"},"kode Pelanggaran",-1),Ue={key:0,class:"p-invalid"},Te={class:"field"},Ae=l("label",{for:"name"},"Nilai Pelanggaran",-1),Be={key:0,class:"p-invalid"},qe={class:"field"},Ge=l("label",{class:"mb-3"},"Status Pelanggaran",-1),Le={class:"formgrid grid"},Ke={class:"field-radiobutton col-6"},Re=l("label",{for:"category1"},"Aktif",-1),Ye={class:"field-radiobutton col-6"},je=l("label",{for:"category2"},"Tidak Aktif",-1),$e={class:"flex align-items-center justify-content-center"},ze=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ee={key:0},Fe={class:"flex align-items-center justify-content-center"},Ie=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Oe={key:0},We=I({__name:"Violation",setup(He){const m=O(),g=u(null),V=u(!1),P=u(!1),w=u(!1),C=u(!1),a=u({}),h=u(null),D=u(null),N=u({}),n=u(!1),r=new W;H(()=>{j()}),J(()=>{r.getAllViolation().then(s=>g.value=s)});const T=()=>{a.value={},n.value=!1,V.value=!0},U=()=>{V.value=!1,n.value=!1,P.value=!1},A=async()=>{n.value=!0,await r.createViolation(a.value).then(s=>s.status?m.add({severity:"success",summary:"Berhasil",detail:"Berhasil Menambah Pelanggaran",life:3e3}):m.add({severity:"error",summary:"Gagal",detail:"Gagal Menambah Pelanggaran",life:3e3})),await r.getAllViolation().then(s=>g.value=s),V.value=!1,a.value={}},B=s=>{a.value={...s},P.value=!0},q=async()=>{await r.updateViolation(a.value).then(s=>s.status?m.add({severity:"success",summary:"Berhasil",detail:"Berhasil Memperbaharui Pencapaian",life:3e3}):m.add({severity:"error",summary:"Gagal",detail:"Gagal Memperbaharui Pencapaian",life:3e3})),await r.getAllViolation().then(s=>g.value=s),P.value=!1},G=s=>{a.value=s,w.value=!0},L=async()=>{await r.deleteViolation(a.value.id).then(s=>s.status?m.add({severity:"success",summary:"Berhasil",detail:"Pencapaian Dihapus",life:3e3}):m.add({severity:"error",summary:"Gagal",detail:"Gagal Menghapus Pencapaian",life:3e3})),await r.getAllViolation().then(s=>g.value=s),w.value=!1,a.value={}},K=()=>{D.value.exportCSV()},R=()=>{C.value=!0},Y=async()=>{await r.deleteMultipleViolation(h.value).then(s=>s.status?m.add({severity:"success",summary:"Berhasil",detail:"Pelanggaran Terhapus",life:3e3}):m.add({severity:"error",summary:"Gagal",detail:"Pelanggaran Gagal Terhapus",life:3e3})),await r.getAllViolation().then(s=>g.value=s),C.value=!1,h.value=null},j=()=>{N.value={global:{value:null,matchMode:Q.CONTAINS}}};return(s,t)=>{const $=p("Toast"),d=p("Button"),z=p("Toolbar"),f=p("InputText"),b=p("Column"),E=p("DataTable"),S=p("RadioButton"),M=p("Dialog");return c(),v("div",X,[l("div",Z,[l("div",ee,[o($),o(z,{class:"mb-4"},{start:i(()=>[l("div",ae,[o(d,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:T}),o(d,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:R,disabled:!h.value||!h.value.length},null,8,["disabled"])])]),end:i(()=>[o(d,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=e=>K(e))})]),_:1}),o(E,{ref_key:"dt",ref:D,value:g.value,selection:h.value,"onUpdate:selection":t[2]||(t[2]=e=>h.value=e),dataKey:"id",paginator:!0,rows:5,filters:N.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll"},{header:i(()=>[l("div",le,[te,l("span",oe,[se,o(f,{modelValue:N.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=e=>N.value.global.value=e),placeholder:"Search..."},null,8,["modelValue"])])])]),default:i(()=>[o(b,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(b,{field:"name",header:"Name",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:i(e=>[ie,y(" "+x(e.data.name),1)]),_:1}),o(b,{field:"achievement_code",header:"Kode Pencapaian",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:i(e=>[ne,y(" "+x(e.data.violation_code),1)]),_:1}),o(b,{field:"score",header:"Nilai",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:i(e=>[de,y(" "+x(e.data.score),1)]),_:1}),o(b,{field:"status",header:"Status Kelas",sortable:!0,headerStyle:"width:20rem;"},{body:i(e=>[ue,y(" "+x(e.data.active_status?"Aktif":"Tidak Aktif"),1)]),_:1}),o(b,{headerStyle:"min-width:10rem;"},{body:i(e=>[o(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:F=>B(e.data)},null,8,["onClick"]),o(d,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:F=>G(e.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),o(M,{visible:V.value,"onUpdate:visible":t[8]||(t[8]=e=>V.value=e),style:{width:"450px"},header:"Penambahan Data Pelanggaran",modal:!0,class:"p-fluid"},{footer:i(()=>[o(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:U}),o(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:A})]),default:i(()=>[l("div",re,[ce,o(f,{id:"name",modelValue:a.value.name,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:k({"p-invalid":n.value&&!a.value.name})},null,8,["modelValue","class"]),n.value&&!a.value.name?(c(),v("small",ve,"Name is required.")):_("",!0)]),l("div",me,[pe,o(f,{id:"name",modelValue:a.value.violation_code,"onUpdate:modelValue":t[4]||(t[4]=e=>a.value.violation_code=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:k({"p-invalid":n.value&&!a.value.violation_code})},null,8,["modelValue","class"]),n.value&&!a.value.violation_code?(c(),v("small",_e,"Kode Pencapaian is required.")):_("",!0)]),l("div",fe,[ge,o(f,{type:"number",id:"name",modelValue:a.value.score,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value.score=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:k({"p-invalid":n.value&&!a.value.score})},null,8,["modelValue","class"]),n.value&&!a.value.score?(c(),v("small",he,"Nilai Pencapaian is required.")):_("",!0)]),l("div",be,[ye,l("div",ke,[l("div",Ve,[o(S,{id:"category1",name:"true",value:1,modelValue:a.value.active_status,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.active_status=e)},null,8,["modelValue"]),Pe]),l("div",we,[o(S,{id:"category2",name:"false",value:0,modelValue:a.value.active_status,"onUpdate:modelValue":t[7]||(t[7]=e=>a.value.active_status=e)},null,8,["modelValue"]),Ce])])])]),_:1},8,["visible"]),o(M,{visible:P.value,"onUpdate:visible":t[14]||(t[14]=e=>P.value=e),style:{width:"450px"},header:"Edit Data Pelanggaran",modal:!0,class:"p-fluid"},{footer:i(()=>[o(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:U}),o(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:q})]),default:i(()=>[l("div",xe,[Ne,o(f,{id:"name",modelValue:a.value.name,"onUpdate:modelValue":t[9]||(t[9]=e=>a.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:k({"p-invalid":n.value&&!a.value.name})},null,8,["modelValue","class"]),n.value&&!a.value.name?(c(),v("small",Se,"Name is required.")):_("",!0)]),l("div",Me,[De,o(f,{id:"name",modelValue:a.value.violation_code,"onUpdate:modelValue":t[10]||(t[10]=e=>a.value.violation_code=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:k({"p-invalid":n.value&&!a.value.violation_code})},null,8,["modelValue","class"]),n.value&&!a.value.violation_code?(c(),v("small",Ue,"Kode Pencapaian is required.")):_("",!0)]),l("div",Te,[Ae,o(f,{type:"number",id:"name",modelValue:a.value.score,"onUpdate:modelValue":t[11]||(t[11]=e=>a.value.score=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:k({"p-invalid":n.value&&!a.value.score})},null,8,["modelValue","class"]),n.value&&!a.value.score?(c(),v("small",Be,"Nilai Pencapaian is required.")):_("",!0)]),l("div",qe,[Ge,l("div",Le,[l("div",Ke,[o(S,{id:"category1",name:"true",value:1,modelValue:a.value.active_status,"onUpdate:modelValue":t[12]||(t[12]=e=>a.value.active_status=e)},null,8,["modelValue"]),Re]),l("div",Ye,[o(S,{id:"category2",name:"false",value:0,modelValue:a.value.active_status,"onUpdate:modelValue":t[13]||(t[13]=e=>a.value.active_status=e)},null,8,["modelValue"]),je])])])]),_:1},8,["visible"]),o(M,{visible:w.value,"onUpdate:visible":t[16]||(t[16]=e=>w.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[o(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[15]||(t[15]=e=>w.value=!1)}),o(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:L})]),default:i(()=>[l("div",$e,[ze,a.value?(c(),v("span",Ee,[y("Apakah Anda Yakin Untuk Menghapus "),l("b",null,x(a.value.name),1),y("?")])):_("",!0)])]),_:1},8,["visible"]),o(M,{visible:C.value,"onUpdate:visible":t[18]||(t[18]=e=>C.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[o(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[17]||(t[17]=e=>C.value=!1)}),o(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:Y})]),default:i(()=>[l("div",Fe,[Ie,a.value?(c(),v("span",Oe,"Apakah Anda Yakin Untuk Menghapus Kelas Yang Dipilih?")):_("",!0)])]),_:1},8,["visible"])])])])}}});export{We as default};

var ae=Object.defineProperty;var te=(g,i,v)=>i in g?ae(g,i,{enumerable:!0,configurable:!0,writable:!0,value:v}):g[i]=v;var A=(g,i,v)=>(te(g,typeof i!="symbol"?i+"":i,v),v);import{d as se,h as oe,r as m,i as ie,o as ne,j as de,w as ue,a as _,b as r,c,e as a,f as s,k as n,l as f,t as h,n as k,m as b,F as $,p as j}from"./index-655b1c19.js";import{S as re}from"./SiswaService-ac3fb665.js";import{C as ce}from"./ClassroomService-4911a0c7.js";class me{constructor(){A(this,"url");A(this,"token");this.url="https://api-sman24dev.matradipti.org/api/v1/",this.token=JSON.parse(window.localStorage.getItem("token")).token}getAllGender(){return fetch(`${this.url}gender`,{method:"GET",headers:{Authorization:`Bearer ${this.token}`}}).then(i=>i.json()).then(i=>i.data)}}const ve={class:"grid"},pe={class:"col-12"},_e={class:"card"},fe={class:"my-2"},he={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},be=a("h5",{class:"m-0"},"Data Siswa SMAN 24 Bandung",-1),Se={class:"block mt-2 md:mt-0 p-input-icon-left"},ge=a("i",{class:"pi pi-search"},null,-1),ye=a("span",{class:"p-column-title"},"Name",-1),we=a("span",{class:"p-column-title"},"NIS",-1),Ne=a("span",{class:"p-column-title"},"NISN",-1),ke=a("span",{class:"p-column-title"},"kelamin",-1),Ve=a("span",{class:"p-column-title"},"Kelas",-1),Ce={class:"field"},xe=a("label",{for:"name"},"Name",-1),Ie={key:0,class:"p-invalid"},De={class:"field"},Ue=a("label",{for:"name"},"NIS",-1),Pe={key:0,class:"p-invalid"},Me={class:"field"},Ae=a("label",{for:"name"},"NISN",-1),Te={key:0,class:"p-invalid"},Be={class:"field"},qe=a("label",{for:"inventoryStatus",class:"mb-3"},"Kelas",-1),Ge={class:"field"},Le=a("label",{class:"mb-3"},"Kelamin",-1),Ke={class:"formgrid grid"},$e={class:"field-radiobutton col-6"},je={for:"category2"},Re={class:"flex align-items-center justify-content-center"},Ye=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ze={key:0},Ee={class:"field"},Fe=a("label",{for:"name"},"Name",-1),Oe={key:0,class:"p-invalid"},Je={class:"field"},He=a("label",{for:"name"},"NIS",-1),Qe={key:0,class:"p-invalid"},We={class:"field"},Xe=a("label",{for:"name"},"NISN",-1),Ze={key:0,class:"p-invalid"},el={class:"field"},ll=a("label",{for:"inventoryStatus",class:"mb-3"},"Kelas",-1),al={class:"field"},tl=a("label",{class:"mb-3"},"Kelamin",-1),sl={class:"formgrid grid"},ol={class:"field-radiobutton col-6"},il={for:"category2"},nl={class:"flex align-items-center justify-content-center"},dl=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ul={key:0},rl={class:"flex align-items-center justify-content-center"},cl=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ml={key:0},hl=se({__name:"Student",setup(g){const i=oe(),v=m(null),P=m(null),M=m(null),V=m(!1),C=m(!1),S=m(!1),x=m(!1),l=m({}),N=m(null),T=m(null),U=m({}),d=m(!1),B=m(!0),p=new re,R=new ce,Y=new me;ie(()=>{X()}),ne(()=>{p.getAllStudentData().then(o=>v.value=o),R.getAllClassroom().then(o=>P.value=o),Y.getAllGender().then(o=>M.value=o),B.value=!1});const z=()=>{l.value={},d.value=!1,V.value=!0},q=()=>{V.value=!1,C.value=!1,d.value=!1},E=async()=>{d.value=!0,await p.createStudentData(l.value).then(o=>{o.status?i.add({severity:"success",summary:"Berhasil",detail:"Berhasil Tambah Siswa",life:3e3}):i.add({severity:"error",summary:"Gagal",detail:"Gagal Untuk Membuat Data Siswa",life:3e3})}),await p.getAllStudentData().then(o=>v.value=o),V.value=!1,l.value={}},F=o=>{l.value={...o},C.value=!0},O=async()=>{await p.updateStudentData(l.value).then(o=>{o?i.add({severity:"success",summary:"Berhasil",detail:"Berhasil Untuk Pemperbaharui Data Siswa",life:3e3}):i.add({severity:"error",summary:"Gagal",detail:"Gagal Untuk Memperbaharui Data Siswa",life:3e3})}),await p.getAllStudentData().then(o=>v.value=o),C.value=!1},J=o=>{l.value=o,S.value=!0},G=async()=>{S.value=!1,await p.deleteStudent(l.value.student_id).then(o=>o?i.add({severity:"success",summary:"Successful",detail:"berhasil menghapus data",life:3e3}):i.add({severity:"error",summary:"Gagal",detail:"Gagal Menghapus data siswa",life:3e3})),await p.getAllStudentData().then(o=>v.value=o),l.value={}},H=()=>{T.value.exportCSV()},Q=()=>{x.value=!0},W=async()=>{await p.deleteMultipleStudent(N.value).then(o=>o.status?i.add({severity:"success",summary:"Berhasil",detail:"Siswa Terhapus",life:3e3}):i.add({severity:"error",summary:"Gagal",detail:"Siswa Gagal Terhapus",life:3e3})),await p.getAllStudentData().then(o=>v.value=o),x.value=!1,N.value=null},X=()=>{U.value={global:{value:null,matchMode:de.CONTAINS}}};return ue(l,(o,t)=>{}),(o,t)=>{const Z=_("Toast"),u=_("Button"),ee=_("Toolbar"),y=_("InputText"),w=_("Column"),le=_("DataTable"),L=_("Dropdown"),K=_("RadioButton"),I=_("Dialog");return r(),c("div",ve,[a("div",pe,[a("div",_e,[s(Z),s(ee,{class:"mb-4"},{start:n(()=>[a("div",fe,[s(u,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:z}),s(u,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:Q,disabled:!N.value||!N.value.length},null,8,["disabled"])])]),end:n(()=>[s(u,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=e=>H(e))})]),_:1}),s(le,{ref_key:"dt",ref:T,value:v.value,selection:N.value,"onUpdate:selection":t[2]||(t[2]=e=>N.value=e),dataKey:"student_id",paginator:!0,rows:20,filters:U.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[20,50,75,100],loading:B.value,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} students",responsiveLayout:"scroll"},{header:n(()=>[a("div",he,[be,a("span",Se,[ge,s(y,{modelValue:U.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=e=>U.value.global.value=e),placeholder:"Search..."},null,8,["modelValue"])])])]),default:n(()=>[s(w,{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(w,{field:"name",header:"Name",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[ye,f(" "+h(e.data.name),1)]),_:1}),s(w,{field:"NIS",header:"NIS",sortable:!0,headerStyle:"width:14%; min-width:8rem;"},{body:n(e=>[we,f(" "+h(e.data.NIS),1)]),_:1}),s(w,{field:"NISN",header:"NISN",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Ne,f(" "+h(e.data.NISN),1)]),_:1}),s(w,{field:"code",header:"Kelamin",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[ke,f(" "+h(e.data.code),1)]),_:1}),s(w,{field:"classroom_name",header:"Kelas",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Ve,f(" "+h(e.data.classroom_name),1)]),_:1}),s(w,{headerStyle:"min-width:10rem;"},{body:n(e=>[s(u,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:D=>F(e.data)},null,8,["onClick"]),s(u,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:D=>J(e.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters","loading"]),s(I,{visible:V.value,"onUpdate:visible":t[8]||(t[8]=e=>V.value=e),style:{width:"450px"},header:"Penambahan Data Siswa",modal:!0,class:"p-fluid"},{footer:n(()=>[s(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:q}),s(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:E})]),default:n(()=>[a("div",Ce,[xe,s(y,{id:"name",modelValue:l.value.name,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:k({"p-invalid":d.value&&!l.value.name})},null,8,["modelValue","class"]),d.value&&!l.value.name?(r(),c("small",Ie,"Name is required.")):b("",!0)]),a("div",De,[Ue,s(y,{id:"name",type:"number",modelValue:l.value.NIS,"onUpdate:modelValue":t[4]||(t[4]=e=>l.value.NIS=e),modelModifiers:{trim:!0},required:!0,class:k({"p-invalid":d.value&&!l.value.name})},null,8,["modelValue","class"]),d.value&&!l.value.NIS?(r(),c("small",Pe,"NIS is required.")):b("",!0)]),a("div",Me,[Ae,s(y,{id:"name",type:"number",modelValue:l.value.NISN,"onUpdate:modelValue":t[5]||(t[5]=e=>l.value.NISN=e),modelModifiers:{trim:!0},required:!0,class:k({"p-invalid":d.value&&!l.value.name})},null,8,["modelValue","class"]),d.value&&!l.value.NISN?(r(),c("small",Te,"NIS is required.")):b("",!0)]),a("div",Be,[qe,s(L,{id:"inventoryStatus",modelValue:l.value.classroom_id,"onUpdate:modelValue":t[6]||(t[6]=e=>l.value.classroom_id=e),options:P.value,optionLabel:"name"},null,8,["modelValue","options"])]),a("div",Ge,[Le,a("div",Ke,[(r(!0),c($,null,j(M.value,e=>(r(),c("div",$e,[s(K,{id:"category2",name:e.code,value:e.id,modelValue:l.value.gender_id,"onUpdate:modelValue":t[7]||(t[7]=D=>l.value.gender_id=D)},null,8,["name","value","modelValue"]),a("label",je,h(e.gender),1)]))),256))])])]),_:1},8,["visible"]),s(I,{visible:S.value,"onUpdate:visible":t[10]||(t[10]=e=>S.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=e=>S.value=!1)}),s(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:G})]),default:n(()=>[a("div",Re,[Ye,l.value?(r(),c("span",ze,[f("Apakah Anda Yakin Untuk Menghapus Siswa "),a("b",null,h(l.value.name),1),f("?")])):b("",!0)])]),_:1},8,["visible"]),s(I,{visible:C.value,"onUpdate:visible":t[16]||(t[16]=e=>C.value=e),style:{width:"450px"},header:"Edit Data Siswa",modal:!0,class:"p-fluid"},{footer:n(()=>[s(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:q}),s(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:O})]),default:n(()=>[a("div",Ee,[Fe,s(y,{id:"name",modelValue:l.value.name,"onUpdate:modelValue":t[11]||(t[11]=e=>l.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:k({"p-invalid":d.value&&!l.value.name})},null,8,["modelValue","class"]),d.value&&!l.value.name?(r(),c("small",Oe,"Name is required.")):b("",!0)]),a("div",Je,[He,s(y,{id:"name",type:"number",modelValue:l.value.NIS,"onUpdate:modelValue":t[12]||(t[12]=e=>l.value.NIS=e),modelModifiers:{trim:!0},required:!0,class:k({"p-invalid":d.value&&!l.value.name})},null,8,["modelValue","class"]),d.value&&!l.value.NIS?(r(),c("small",Qe,"NIS is required.")):b("",!0)]),a("div",We,[Xe,s(y,{id:"name",type:"number",modelValue:l.value.NISN,"onUpdate:modelValue":t[13]||(t[13]=e=>l.value.NISN=e),modelModifiers:{trim:!0},required:!0,class:k({"p-invalid":d.value&&!l.value.name})},null,8,["modelValue","class"]),d.value&&!l.value.NISN?(r(),c("small",Ze,"NIS is required.")):b("",!0)]),a("div",el,[ll,s(L,{id:"inventoryStatus",modelValue:l.value.classroom_id,"onUpdate:modelValue":t[14]||(t[14]=e=>l.value.classroom_id=e),options:P.value,optionLabel:"name"},null,8,["modelValue","options"])]),a("div",al,[tl,a("div",sl,[(r(!0),c($,null,j(M.value,e=>(r(),c("div",ol,[s(K,{id:"category2",name:e.code,value:e.id,modelValue:l.value.gender_id,"onUpdate:modelValue":t[15]||(t[15]=D=>l.value.gender_id=D)},null,8,["name","value","modelValue"]),a("label",il,h(e.gender),1)]))),256))])])]),_:1},8,["visible"]),s(I,{visible:S.value,"onUpdate:visible":t[18]||(t[18]=e=>S.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[17]||(t[17]=e=>S.value=!1)}),s(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:G})]),default:n(()=>[a("div",nl,[dl,l.value?(r(),c("span",ul,[f("Apakah Anda Yakin Untuk Menghapus Siswa "),a("b",null,h(l.value.name),1),f("?")])):b("",!0)])]),_:1},8,["visible"]),s(I,{visible:x.value,"onUpdate:visible":t[20]||(t[20]=e=>x.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[19]||(t[19]=e=>x.value=!1)}),s(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:W})]),default:n(()=>[a("div",rl,[cl,l.value?(r(),c("span",ml,"Apakah Anda Yakin Untuk Menghapus Data-Data Siswa?")):b("",!0)])]),_:1},8,["visible"])])])])}}});export{hl as default};

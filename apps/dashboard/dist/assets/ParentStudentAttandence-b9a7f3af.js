import{d as R,u as V,h as U,r as i,i as F,s as K,w as M,a as c,b as h,c as v,f as s,e,k as o,t as n,z as W,F as k,l as g,m as j,v as q,x as O,y as z}from"./index-b7ff7bf0.js";import{S as E}from"./SiswaService-bc813660.js";import{P as Y}from"./PresensiService-a51147c8.js";const l=m=>(q("data-v-a836eade"),m=m(),O(),m),$={class:"layout-topbar"},G=["src"],H=l(()=>e("span",null,"SMAN 24 Bandung",-1)),J=l(()=>e("span",{class:"title-navbar"},"Presensi Siswa",-1)),Q={class:"content card"},X={class:"flex align-option-center"},Z={class:"card content"},ee={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},te={class:"m-0"},ae=l(()=>e("span",{class:"p-column-title"},"nama",-1)),se={key:0},oe={key:1},ne=l(()=>e("span",{class:"p-column-title"},"status",-1)),le={class:"card content"},re={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ie={class:"m-0"},ce=l(()=>e("span",{class:"p-column-title"},"Kehadiran",-1)),de=l(()=>e("span",{class:"p-column-title"},"Deskripsi",-1)),ue=l(()=>e("span",{class:"p-column-title"},"Waktu",-1)),me=R({__name:"ParentStudentAttandence",setup(m){const{layoutConfig:P}=V();U();const f=i(!1),w=i([]),r=i(""),y=i(),p=i(!1),_=i({}),b=new E,L=new Y;F(()=>{(async()=>await b.getAllStudentActiveData().then(a=>w.value=a))()});const C=a=>{a.query.trim().length?y.value=w.value.filter(d=>d.name.toLowerCase().startsWith(a.query.toLowerCase())):y.value=[...w.value]},T=a=>a.name+" - "+a.NIS,x=async()=>{f.value=!0,p.value=!1,(async()=>await L.getStudentAttendencesByStudentId(r.value).then(a=>{_.value=a}))(),p.value=!0,f.value=!1},D=K(()=>`layout/images/${P.darkTheme.value?"logo-white":"logo-dark"}.svg`);return M(r,(a,d)=>{a==""&&(p.value=!1,_.value={})}),(a,d)=>{const N=c("Toast"),A=c("BlockUI"),I=c("router-link"),B=c("AutoComplete"),u=c("Column"),S=c("DataTable");return h(),v(k,null,[s(N),e("div",$,[s(A,{blocked:f.value,fullScreen:""},null,8,["blocked"]),s(I,{to:"#",class:"layout-topbar-logo"},{default:o(()=>[e("img",{src:D.value,alt:"logo"},null,8,G),H]),_:1}),J]),e("div",Q,[s(B,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=t=>r.value=t),optionLabel:T,placeholder:"Silakan Mencari Nama Siswa",inputStyle:"width:100%;",focus:"",suggestions:y.value,onComplete:C,onKeyup:W(x,["enter"]),forceSelection:""},{option:o(t=>[e("div",X,[e("div",null,n(t.option.name)+" - "+n(t.option.NIS),1)])]),_:1},8,["modelValue","suggestions"])]),p.value?(h(),v(k,{key:0},[e("div",Z,[s(S,{value:_.value.attandence,paginator:!0,rows:5,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll"},{header:o(()=>[e("div",ee,[e("h5",te,"Presensi Siswa "+n(r.value.name),1)])]),default:o(()=>[s(u,{field:"name",header:"Status Presensi",sortable:!0,headerStyle:"width:30rem;"},{body:o(t=>[ae,t.data.is_late==!0?(h(),v("div",se," Terlambat ")):(h(),v("div",oe," Tepat Waktu "))]),_:1}),s(u,{field:"status",header:"Waktu Presensi",sortable:!0,headerStyle:"width:20rem;"},{body:o(t=>[ne,g(" "+n(t.data.timestamp),1)]),_:1})]),_:1},8,["value"])]),e("div",le,[s(S,{value:_.value.permission,paginator:!0,rows:5,filters:a.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll"},{header:o(()=>[e("div",re,[e("h5",ie,"Ketidak hadiran siswa "+n(r.value.name),1)])]),default:o(()=>[s(u,{field:"name",header:"kehadiran",sortable:!0,headerStyle:"width:30rem;"},{body:o(t=>[ce,g(" "+n(t.data.name),1)]),_:1}),s(u,{field:"name",header:"Deskripsi",sortable:!0,headerStyle:"width:30rem;"},{body:o(t=>[de,g(" "+n(t.data.description),1)]),_:1}),s(u,{field:"status",header:"Tanggal",sortable:!0,headerStyle:"width:20rem;"},{body:o(t=>[ue,g(" "+n(new Date(t.data.timestamp).getUTCDate()+"-"+new Date(t.data.timestamp).getUTCMonth()+"-"+new Date(t.data.timestamp).getUTCFullYear()),1)]),_:1})]),_:1},8,["value","filters"])])],64)):j("",!0)],64)}}});const ve=z(me,[["__scopeId","data-v-a836eade"]]);export{ve as default};
